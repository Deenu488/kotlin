--- KtFile ---
<File name: KT-61728.kt, Physical: true>
<ELEMENT>fun foo(param: String?): String? {
    val tmp = param?.let {
        it
    } ?: return null
}
</ELEMENT> [(0,96)]:
Tower Data Context:
    Element 0
        Scope: FirDefaultStarImportingScope
    Element 1
        Scope: FirExplicitStarImportingScope
    Element 2
        Scope: FirDefaultSimpleImportingScope
    Element 3
        Scope: FirDefaultSimpleImportingScope
    Element 4
        Scope: FirPackageMemberScope
    Element 5
        Scope: FirExplicitSimpleImportingScope

--- KtPackageDirective ---
<File name: KT-61728.kt, Physical: true>
<ELEMENT></ELEMENT> [(0,0)]:
Tower Data Context:
    Element 0
        Scope: FirDefaultStarImportingScope
    Element 1
        Scope: FirExplicitStarImportingScope
    Element 2
        Scope: FirDefaultSimpleImportingScope
    Element 3
        Scope: FirDefaultSimpleImportingScope
    Element 4
        Scope: FirPackageMemberScope
    Element 5
        Scope: FirExplicitSimpleImportingScope

--- KtNamedFunction ---
<File name: KT-61728.kt, Physical: true>
<ELEMENT>fun foo(param: String?): String? {
    val tmp = param?.let {
        it
    } ?: return null
}</ELEMENT> [(0,95)]:
Tower Data Context:
    Element 0
        Scope: FirDefaultStarImportingScope
    Element 1
        Scope: FirExplicitStarImportingScope
    Element 2
        Scope: FirDefaultSimpleImportingScope
    Element 3
        Scope: FirDefaultSimpleImportingScope
    Element 4
        Scope: FirPackageMemberScope
    Element 5
        Scope: FirExplicitSimpleImportingScope

--- KtParameter ---
<File name: KT-61728.kt, Physical: true>
fun foo(<ELEMENT>param: String?</ELEMENT>): String? {
    val tmp = param?.let {
        it
    } ?: return null
} [(8,22)]:
Tower Data Context:
    Element 0
        Scope: FirDefaultStarImportingScope
    Element 1
        Scope: FirExplicitStarImportingScope
    Element 2
        Scope: FirDefaultSimpleImportingScope
    Element 3
        Scope: FirDefaultSimpleImportingScope
    Element 4
        Scope: FirPackageMemberScope
    Element 5
        Scope: FirExplicitSimpleImportingScope
    Element 6
        Scope: FirLocalScope
            Properties:
                FirValueParameterSymbol param: R|kotlin/String?|

--- KtTypeReference ---
<File name: KT-61728.kt, Physical: true>
fun foo(param: <ELEMENT>String?</ELEMENT>): String? {
    val tmp = param?.let {
        it
    } ?: return null
} [(15,22)]:
Tower Data Context:
    Element 0
        Scope: FirDefaultStarImportingScope
    Element 1
        Scope: FirExplicitStarImportingScope
    Element 2
        Scope: FirDefaultSimpleImportingScope
    Element 3
        Scope: FirDefaultSimpleImportingScope
    Element 4
        Scope: FirPackageMemberScope
    Element 5
        Scope: FirExplicitSimpleImportingScope
    Element 6
        Scope: FirLocalScope
            Properties:
                FirValueParameterSymbol param: R|kotlin/String?|

--- KtTypeReference ---
<File name: KT-61728.kt, Physical: true>
fun foo(param: String?): <ELEMENT>String?</ELEMENT> {
    val tmp = param?.let {
        it
    } ?: return null
} [(25,32)]:
Tower Data Context:
    Element 0
        Scope: FirDefaultStarImportingScope
    Element 1
        Scope: FirExplicitStarImportingScope
    Element 2
        Scope: FirDefaultSimpleImportingScope
    Element 3
        Scope: FirDefaultSimpleImportingScope
    Element 4
        Scope: FirPackageMemberScope
    Element 5
        Scope: FirExplicitSimpleImportingScope

--- KtBlockExpression ---
<File name: KT-61728.kt, Physical: true>
fun foo(param: String?): String? <ELEMENT>{
    val tmp = param?.let {
        it
    } ?: return null
}</ELEMENT> [(33,95)]:
Tower Data Context:
    Element 0
        Scope: FirDefaultStarImportingScope
    Element 1
        Scope: FirExplicitStarImportingScope
    Element 2
        Scope: FirDefaultSimpleImportingScope
    Element 3
        Scope: FirDefaultSimpleImportingScope
    Element 4
        Scope: FirPackageMemberScope
    Element 5
        Scope: FirExplicitSimpleImportingScope
    Element 6
        Scope: FirLocalScope
            Properties:
                FirValueParameterSymbol param: R|kotlin/String?|

--- KtProperty ---
<File name: KT-61728.kt, Physical: true>
fun foo(param: String?): String? {
    <ELEMENT>val tmp = param?.let {
        it
    } ?: return null</ELEMENT>
} [(39,93)]:
Tower Data Context:
    Element 0
        Scope: FirDefaultStarImportingScope
    Element 1
        Scope: FirExplicitStarImportingScope
    Element 2
        Scope: FirDefaultSimpleImportingScope
    Element 3
        Scope: FirDefaultSimpleImportingScope
    Element 4
        Scope: FirPackageMemberScope
    Element 5
        Scope: FirExplicitSimpleImportingScope
    Element 6
        Scope: FirLocalScope
            Properties:
                FirValueParameterSymbol param: R|kotlin/String?|
    Element 7
        Scope: FirLocalScope
Smart Casts:
    FirValueParameterSymbol param: R|kotlin/String?|
    Types:
        kotlin.Any

--- KtBinaryExpression ---
<File name: KT-61728.kt, Physical: true>
fun foo(param: String?): String? {
    val tmp = <ELEMENT>param?.let {
        it
    } ?: return null</ELEMENT>
} [(49,93)]:
Tower Data Context:
    Element 0
        Scope: FirDefaultStarImportingScope
    Element 1
        Scope: FirExplicitStarImportingScope
    Element 2
        Scope: FirDefaultSimpleImportingScope
    Element 3
        Scope: FirDefaultSimpleImportingScope
    Element 4
        Scope: FirPackageMemberScope
    Element 5
        Scope: FirExplicitSimpleImportingScope
    Element 6
        Scope: FirLocalScope
            Properties:
                FirValueParameterSymbol param: R|kotlin/String?|
    Element 7
        Scope: FirLocalScope
Smart Casts:
    FirValueParameterSymbol param: R|kotlin/String?|
    Types:
        kotlin.Any

--- KtSafeQualifiedExpression ---
<File name: KT-61728.kt, Physical: true>
fun foo(param: String?): String? {
    val tmp = <ELEMENT>param?.let {
        it
    }</ELEMENT> ?: return null
} [(49,78)]:
Tower Data Context:
    Element 0
        Scope: FirDefaultStarImportingScope
    Element 1
        Scope: FirExplicitStarImportingScope
    Element 2
        Scope: FirDefaultSimpleImportingScope
    Element 3
        Scope: FirDefaultSimpleImportingScope
    Element 4
        Scope: FirPackageMemberScope
    Element 5
        Scope: FirExplicitSimpleImportingScope
    Element 6
        Scope: FirLocalScope
            Properties:
                FirValueParameterSymbol param: R|kotlin/String?|
    Element 7
        Scope: FirLocalScope

--- KtNameReferenceExpression ---
<File name: KT-61728.kt, Physical: true>
fun foo(param: String?): String? {
    val tmp = <ELEMENT>param</ELEMENT>?.let {
        it
    } ?: return null
} [(49,54)]:
Tower Data Context:
    Element 0
        Scope: FirDefaultStarImportingScope
    Element 1
        Scope: FirExplicitStarImportingScope
    Element 2
        Scope: FirDefaultSimpleImportingScope
    Element 3
        Scope: FirDefaultSimpleImportingScope
    Element 4
        Scope: FirPackageMemberScope
    Element 5
        Scope: FirExplicitSimpleImportingScope
    Element 6
        Scope: FirLocalScope
            Properties:
                FirValueParameterSymbol param: R|kotlin/String?|
    Element 7
        Scope: FirLocalScope

--- KtNameReferenceExpression ---
<File name: KT-61728.kt, Physical: true>
fun foo(param: String?): String? {
    val tmp = param?.<ELEMENT>let</ELEMENT> {
        it
    } ?: return null
} [(56,59)]:
Tower Data Context:
    Element 0
        Scope: FirDefaultStarImportingScope
    Element 1
        Scope: FirExplicitStarImportingScope
    Element 2
        Scope: FirDefaultSimpleImportingScope
    Element 3
        Scope: FirDefaultSimpleImportingScope
    Element 4
        Scope: FirPackageMemberScope
    Element 5
        Scope: FirExplicitSimpleImportingScope
    Element 6
        Scope: FirLocalScope
            Properties:
                FirValueParameterSymbol param: R|kotlin/String?|
    Element 7
        Scope: FirLocalScope
Smart Casts:
    FirValueParameterSymbol param: R|kotlin/String?|
    Types:
        kotlin.Any

--- KtLambdaExpression ---
<File name: KT-61728.kt, Physical: true>
fun foo(param: String?): String? {
    val tmp = param?.let <ELEMENT>{
        it
    }</ELEMENT> ?: return null
} [(60,78)]:
Tower Data Context:
    Element 0
        Scope: FirDefaultStarImportingScope
    Element 1
        Scope: FirExplicitStarImportingScope
    Element 2
        Scope: FirDefaultSimpleImportingScope
    Element 3
        Scope: FirDefaultSimpleImportingScope
    Element 4
        Scope: FirPackageMemberScope
    Element 5
        Scope: FirExplicitSimpleImportingScope
    Element 6
        Scope: FirLocalScope
            Properties:
                FirValueParameterSymbol param: R|kotlin/String?|
    Element 7
        Scope: FirLocalScope
Smart Casts:
    FirValueParameterSymbol param: R|kotlin/String?|
    Types:
        kotlin.Any

--- KtFunctionLiteral ---
<File name: KT-61728.kt, Physical: true>
<ELEMENT>{
        it
    }</ELEMENT> [(60,78)]:
Tower Data Context:
    Element 0
        Scope: FirDefaultStarImportingScope
    Element 1
        Scope: FirExplicitStarImportingScope
    Element 2
        Scope: FirDefaultSimpleImportingScope
    Element 3
        Scope: FirDefaultSimpleImportingScope
    Element 4
        Scope: FirPackageMemberScope
    Element 5
        Scope: FirExplicitSimpleImportingScope
    Element 6
        Scope: FirLocalScope
            Properties:
                FirValueParameterSymbol param: R|kotlin/String?|
    Element 7
        Scope: FirLocalScope
Smart Casts:
    FirValueParameterSymbol param: R|kotlin/String?|
    Types:
        kotlin.Any

--- KtBlockExpression ---
<File name: KT-61728.kt, Physical: true>
{
        <ELEMENT>it</ELEMENT>
    } [(70,72)]:
Tower Data Context:
    Element 0
        Scope: FirDefaultStarImportingScope
    Element 1
        Scope: FirExplicitStarImportingScope
    Element 2
        Scope: FirDefaultSimpleImportingScope
    Element 3
        Scope: FirDefaultSimpleImportingScope
    Element 4
        Scope: FirPackageMemberScope
    Element 5
        Scope: FirExplicitSimpleImportingScope
    Element 6
        Scope: FirLocalScope
            Properties:
                FirValueParameterSymbol param: R|kotlin/String?|
    Element 7
        Scope: FirLocalScope
    Element 8
        Scope: FirLocalScope
            Properties:
                FirValueParameterSymbol it: R|kotlin/String|
Smart Casts:
    FirValueParameterSymbol param: R|kotlin/String?|
    Types:
        kotlin.Any

--- KtNameReferenceExpression ---
<File name: KT-61728.kt, Physical: true>
{
        <ELEMENT>it</ELEMENT>
    } [(70,72)]:
Tower Data Context:
    Element 0
        Scope: FirDefaultStarImportingScope
    Element 1
        Scope: FirExplicitStarImportingScope
    Element 2
        Scope: FirDefaultSimpleImportingScope
    Element 3
        Scope: FirDefaultSimpleImportingScope
    Element 4
        Scope: FirPackageMemberScope
    Element 5
        Scope: FirExplicitSimpleImportingScope
    Element 6
        Scope: FirLocalScope
            Properties:
                FirValueParameterSymbol param: R|kotlin/String?|
    Element 7
        Scope: FirLocalScope
    Element 8
        Scope: FirLocalScope
            Properties:
                FirValueParameterSymbol it: R|kotlin/String|
    Element 9
        Scope: FirLocalScope
Smart Casts:
    FirValueParameterSymbol param: R|kotlin/String?|
    Types:
        kotlin.Any

--- KtReturnExpression ---
<File name: KT-61728.kt, Physical: true>
fun foo(param: String?): String? {
    val tmp = param?.let {
        it
    } ?: <ELEMENT>return null</ELEMENT>
} [(82,93)]:
Tower Data Context:
    Element 0
        Scope: FirDefaultStarImportingScope
    Element 1
        Scope: FirExplicitStarImportingScope
    Element 2
        Scope: FirDefaultSimpleImportingScope
    Element 3
        Scope: FirDefaultSimpleImportingScope
    Element 4
        Scope: FirPackageMemberScope
    Element 5
        Scope: FirExplicitSimpleImportingScope
    Element 6
        Scope: FirLocalScope
            Properties:
                FirValueParameterSymbol param: R|kotlin/String?|
    Element 7
        Scope: FirLocalScope

--- KtConstantExpression ---
<File name: KT-61728.kt, Physical: true>
fun foo(param: String?): String? {
    val tmp = param?.let {
        it
    } ?: return <ELEMENT>null</ELEMENT>
} [(89,93)]:
Tower Data Context:
    Element 0
        Scope: FirDefaultStarImportingScope
    Element 1
        Scope: FirExplicitStarImportingScope
    Element 2
        Scope: FirDefaultSimpleImportingScope
    Element 3
        Scope: FirDefaultSimpleImportingScope
    Element 4
        Scope: FirPackageMemberScope
    Element 5
        Scope: FirExplicitSimpleImportingScope
    Element 6
        Scope: FirLocalScope
            Properties:
                FirValueParameterSymbol param: R|kotlin/String?|
    Element 7
        Scope: FirLocalScope

FILE: [ResolvedTo(IMPORTS)] KT-61728.kt
    public final [ResolvedTo(BODY_RESOLVE)] fun foo([ResolvedTo(BODY_RESOLVE)] param: R|kotlin/String?|): R|kotlin/String?| {
        [ResolvedTo(BODY_RESOLVE)] lval tmp: R|kotlin/String| = R|<local>/param|?.{ $subj$.R|kotlin/let|<R|kotlin/String|, R|kotlin/String|>(<L> = [ResolvedTo(BODY_RESOLVE)] let@fun <anonymous>([ResolvedTo(BODY_RESOLVE)] it: R|kotlin/String|): R|kotlin/String| <inline=Inline, kind=EXACTLY_ONCE>  {
            ^ R|<local>/it|
        }
        ) } ?: ^foo Null(null)
    }
